var MidtransNew3ds=function(){const t={production:"https://api.midtrans.com/v2/token",sandbox:"https://api.sandbox.midtrans.com/v2/token",staging:"https://api.stg.veritrans.co.id/v2/token"};var n={},e={},a="",r="";function i(t){var n="?",e=encodeURIComponent;for(var a in t)t.hasOwnProperty(a)&&(n+=e(a)+"="+e(t[a])+"&");return n}function o(t){var n=t.origin||t.originalEvent.origin;t.data&&t.data.status_code&&t.data.status_message&&n&&n.match(/https?:\/\/[\w\.]+(veritrans|midtrans)\./)&&MidtransNew3ds.callback(t.data)}return{version:"1.1",clientKey:"",url:"",callback:function(t){t&&"200"==t.status_code?n.onSuccess&&n.onSuccess(t):t&&"201"==t.status_code?n.onPending&&n.onPending(t):n.onFailure&&n.onFailure(t)},authenticate:function(t,e){window.addEventListener?window.addEventListener("message",o,!1):window.attachEvent("onmessage",o),n=e,e.performAuthentication&&e.performAuthentication(t)},getCardToken:function(o,s){var c,d;n=s,(e=o).callback="MidtransNew3ds.callback",c=MidtransNew3ds.url,d=document.getElementById("midtrans-script"),""===c?d.getAttribute("data-environment")&&(a=t[d.getAttribute("data-environment").toLowerCase()]):a=c,a||(a=t.production,console.log("Environment on `data-environment` is not found, set to production")),function(t){var n=document.getElementById("midtrans-script");""!==(r=""===t?n.getAttribute("data-client-key"):t)&&null!==r||console.log('Please add `data-client-key` attribute in the script tag <script id="midtrans-script" type="text/javascript" src="...midtrans-new-3ds.min.js" data-client-key="CLIENT-KEY"><\/script>')}(MidtransNew3ds.clientKey),e.client_key=r,function(t){var n=document.createElement("script");n.src=t,document.getElementsByTagName("head")[0].appendChild(n)}(a+i(e))},redirect:function(t,n){url=t,n.callbackUrl&&(queryParams={},queryParams.callback_type="form",queryParams.callback_url=n.callbackUrl,url+=i(queryParams)),location.href=url}}}();